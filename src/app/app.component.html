<!-- Esta parte es un  login cuando no hay sesion por eso el nfIF-->
<app-loader [show]="loader"></app-loader>
<div class="container-fluid fondo animated fadeIn" *ngIf="!user">
  <div class="h-100 row justify-content-center align-items-center ">
    <div class="img-cont w-25 position-relative">
      <img src="assets/images/Logo_InMuse_Blanco.png" class="w-100">
    </div>

    <div class="col-4">
      <div class="form-cont p-5 d-flex flex-column justify-content-center">
        <form [formGroup]="form" (ngSubmit)="Login()">
          <div class="form-group w-100">
            <input type="text" class="w-100 form-control input-inmuse" [(ngModel)]="strCorreo" placeholder="Correo eléctronico"
              formControlName="usuario">
          </div>

          <div class="form-group w-100">
            <input type="password" class="w-100 form-control input-inmuse" [(ngModel)]="strPassword" placeholder="Contrasena"
              formControlName="contrasena">
          </div>

          <div class="row justify-content-center">
            <div class="col-sm-5">
              <button type="submit" class="w-100 btn btn-inmuse" [disabled]="form.invalid">Entrar</button>
            </div>
          </div>
        </form>
      </div>
    </div>

  </div>
</div>

<!-- Cuando ya hay sesión -->

<div class="contenedor animated fadeIn" *ngIf="user">
  <!--  Sidebar -->
  <div class="panel">
    <h1 class="logo">
      <a>InMuse</a>
    </h1>
    <ul class="lista-opciones">
      <!-- /************************************************/ -->
      <li class="opcion-item titulo">
        <a title="Museo">Museo</a>
        <i class="fa fa-bank"></i>
      </li>
      <div *ngIf="userCan(['superadmin'])">
        <li class="opcion-item" [routerLink]="['/nuevo-museo']" routerLinkActive="active">
          <a title="Nuevo museo">Nuevo museo</a>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-museos']" routerLinkActive="active">
          <a title="Lista de museos">Lista de museos</a>
        </li>
      </div>
      <div *ngIf="userCan(['admin'])">
        <li class="opcion-item" [routerLink]="['/perfil-museo']" routerLinkActive="active">
          <a title="Editar datos de museo">Perfil del museo</a>
        </li>
        <li class="opcion-item" [routerLink]="['/estadisticas']" routerLinkActive="active">
          <a title="Estadísticas">Estadísticas</a>
        </li>
      </div>
      <!-- /************************************************/ -->
      <div *ngIf="userCan(['admin'])">
        <li class="opcion-item titulo">
          <a title="Salas">Salas</a>
          <i class="fa fa-home"></i>
        </li>
        <li class="opcion-item" [routerLink]="['/nueva-sala']" routerLinkActive="active">
          <a title="Nueva sala">Nueva sala</a>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-salas']" routerLinkActive="active">
          <a title="Lista salas">Lista salas</a>
        </li>
      </div>
      <!-- /************************************************/ -->
      <div *ngIf="userCan(['admin'])">
        <li class="opcion-item titulo">
          <a title="Participantes">Obras</a>
          <i class="fa fa-paint-brush"></i>
        </li>
        <li class="opcion-item" [routerLink]="['/nueva-obra']" routerLinkActive="active">
          <a title="Nueva obra">Nueva obra</a>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-obras']" routerLinkActive="active">
          <a title="Lista de obras">Lista de obras</a>
        </li>
      </div>
      <!-- /**********************************************************/ -->
      <div *ngIf="userCan(['admin'])">
          <li class="opcion-item titulo">
            <a title="Eventos">Artistas</a>
            <i class="fa fa-users"></i>
          </li>
          <li class="opcion-item" [routerLink]="['/nuevo-artista']" routerLinkActive="active">
            <a title="Nuevo Evento">Nuevo artista</a>
          </li>
          <li class="opcion-item" [routerLink]="['/lista-artistas']" routerLinkActive="active">
            <a title="Lista Eventos">Lista artistas</a>
          </li>
        </div>
      <!-- /************************************************/ -->
      <div *ngIf="userCan(['admin']) && user.blnPremium">
        <li class="opcion-item titulo">
          <a title="Eventos">Eventos</a>
          <i class="fa fa-calendar-o"></i>
        </li>
        <li class="opcion-item" [routerLink]="['/nuevo-evento']" routerLinkActive="active">
          <a title="Nuevo Evento">Nuevo Evento</a>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-eventos']" routerLinkActive="active">
          <a title="Lista Eventos">Lista Eventos</a>
        </li>
      </div>
      <!-- /************************************************/ -->
      <div *ngIf="userCan(['admin'])">
        <li class="opcion-item titulo">
          <a title="Eventos">Recorrido dinámico</a>
          <i class="fa fa-puzzle-piece"></i>
        </li>
        <li class="opcion-item" [routerLink]="['/nuevo-recorrido']" routerLinkActive="active">
          <a title="Nuevo Evento">Nuevo recorrido</a>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-recorridos']" routerLinkActive="active">
          <a title="Lista Eventos">Lista recorridos</a>
        </li>
      </div>
      <!-- /************************************************/ -->
      <div *ngIf="userCan(['admin'])">
        <li class="opcion-item titulo">
          <a title="Encuestas">Encuesta</a>
          <i class="fa fa-list-ol"></i>
        </li>
        <li class="opcion-item" [routerLink]="['/nueva-encuesta']" routerLinkActive="active">
          <a title="Lista de comentarios">Preguntas</a>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-encuestas']" routerLinkActive="active">
          <a title="Lista de comentarios">Encuestas respondidas</a>
        </li>
      </div>
      <!-- /************************************************/ -->
      <div *ngIf="userCan(['admin'])">

        <li class="opcion-item titulo">
          <a title="Comentarios">Comentarios</a>
          <i class="fa fa-comments-o"></i>
        </li>
        <li class="opcion-item" [routerLink]="['/lista-comentarios']" routerLinkActive="active">
          <a title="Lista de comentarios">Lista de comentarios</a>
        </li>
      </div>
      <!-- /************************************************/ -->
    </ul>
    <a title="Cerrar Sesión" class="btn-sesion" (click)="logOut()">Cerrar Sesión</a>
  </div>
  <!-- Fin Sidebar -->

  <!-- Rendereado de vistas -->
  <div class="visor">
    <div class="visor-header d-flex position-fixed w-100 align-items-center justify-content-center">
      <p class="nombre-museo">{{ userCan(['admin']) ? museo.strNombre : titulo }}</p>
    </div>
    <router-outlet></router-outlet>
  </div>
  <!-- fin -->
</div>


<!-- Cargador -->